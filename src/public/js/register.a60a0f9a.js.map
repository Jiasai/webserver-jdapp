{"version":3,"sources":["webpack:///./src/views/register/Register.vue","webpack:///./src/views/register/Register.vue?9df6","webpack:///./src/views/register/Register.vue?33c8","webpack:///./src/components/toast/Toast.vue?8f0e","webpack:///./src/assets/images/user.png","webpack:///./src/components/toast/Toast.vue","webpack:///./src/components/toast/Toast.vue?22ba"],"names":["class","src","alt","placeholder","username","type","password","ensurement","handleRegister","handleToLogin","show","message","toastMessage","iconstate","showIcon","isPost","data","showToast","length","router","url","withCredentials","result","errno","setTimeout","push","name","components","Toast","setup","render","__scopeId","module","exports","toastData","icon","success","defeat","state","undefined","props"],"mappings":"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","file":"js/register.a60a0f9a.js","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"wrapper__img\">\r\n      <img src=\"../../assets/images/user.png\" alt=\"\" />\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n      <input\r\n        class=\"wrapper__input__content\"\r\n        placeholder=\"请输入用户名\"\r\n        v-model=\"username\"\r\n      />\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n      <input\r\n        type=\"password\"\r\n        class=\"wrapper__input__content\"\r\n        placeholder=\"请输入密码\"\r\n        v-model=\"password\"\r\n      />\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n      <input\r\n        type=\"password\"\r\n        class=\"wrapper__input__content\"\r\n        placeholder=\"请再次确认密码\"\r\n        v-model=\"ensurement\"\r\n      />\r\n    </div>\r\n    <div @click=\"handleRegister\" class=\"wrapper__register-button\">注册</div>\r\n    <div class=\"wrapper__register-link\" @click=\"handleToLogin\">\r\n      已有账号去登陆\r\n    </div>\r\n    <Toast v-if=\"show\" :message=\"toastMessage\" :iconstate='iconstate' :showIcon='showIcon' />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//主动跳转，用useRouter的 push方法\r\nimport { reactive, toRefs } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { post } from \"../../utils/request\";\r\nimport axios from 'axios';\r\nimport Toast, { useToastEffect } from \"../../components/toast/Toast\";\r\n\r\n//判断是否发送请求\r\nconst isPost=(data,showToast)=>{\r\n  /*--这里可以做一系列验证方法，比如不能是空格，密码格式等等---*/\r\n  if(data.username.length<3||data.password.length<3){\r\n    showToast(\"输入字符长度不足\");\r\n    return false;\r\n  }else if(data.password !== data.ensurement){\r\n    showToast(\"密码2次输入不一致\");\r\n    return false;\r\n  }else{return true}\r\n  \r\n}\r\n\r\n//注册相关逻辑\r\nconst useRegisterEffect = showToast => {\r\n  const router = useRouter();\r\n  const data = reactive({ \r\n    username: \"\", \r\n    password: \"\", \r\n    ensurement: \"\" });\r\n  const handleRegister = async () => {\r\n    try { \r\n\r\n      //验证输入\r\n      if(!isPost(data,showToast)) return;\r\n\t  \r\n\t  \r\n     /* const result = await post(\"/api/user/register\", {\r\n        username: data.username,\r\n        password: data.password,\r\n        ensurement: data.ensurement\r\n      }); */\r\n\t\t\t\r\n\t//本地nodejs自建服务端 localhost:3000\r\n\tconst url = 'http://localhost:3000/api/user/register';\r\n\tconst {username,password} = data;\r\n\tconst result = await post(url,{username,password},{withCredentials:true});\r\n\t\t\t\r\n\t\t\t\r\n      if (result?.errno === 0) {      \r\n        showToast(\"注册成功\",'success');\r\n        setTimeout(()=>{\r\n          router.push({name:'Login'});\r\n        },2000);       \r\n      } else {\r\n        showToast(\"注册失败\",'defeat');\r\n      }\r\n    } catch (err) {\r\n      showToast(\"请求失败\",'defeat');\r\n    }\r\n  };\r\n  const {username,password,ensurement}=toRefs(data);\r\n  return { handleRegister, username, password,ensurement};\r\n};\r\n//路由跳转登录页\r\nconst useToLoginEffect = () => {\r\n  const router = useRouter();\r\n  const handleToLogin = () => {\r\n    router.push({ name: \"Login\" });\r\n  };\r\n  return { handleToLogin };\r\n};\r\n\r\nexport default {\r\n  name: \"Register\",\r\n  components: { Toast },\r\n  setup() {\r\n    const { show, toastMessage, showToast,iconstate,showIcon} = useToastEffect();\r\n    const { handleRegister, username, password,ensurement} = useRegisterEffect(showToast);\r\n    const { handleToLogin } = useToLoginEffect();\r\n    return {\r\n      handleRegister,\r\n      username,\r\n      password,\r\n      ensurement,\r\n      show,\r\n      toastMessage,\r\n      iconstate,showIcon,\r\n      handleToLogin\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../assets/style/variables.scss\";\r\n.wrapper {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  &__img {\r\n    width: 1.56rem;\r\n    height: 1.56rem;\r\n    margin: 0 auto 0.8rem;\r\n    img {\r\n      width: 100%;\r\n    }\r\n  }\r\n  &__input {\r\n    background: #f9f9f9;\r\n    border: 1px solid rgba(0, 0, 0, 0.1);\r\n    border-radius: 0.12rem;\r\n    height: 0.96rem;\r\n    margin: 0 0.8rem 0.32rem;\r\n    &__content {\r\n      width: 100%;\r\n      height: 100%;\r\n      background: none;\r\n      padding: 0 0.3rem;\r\n      font-size: 0.32rem;\r\n    }\r\n    &__content::-webkit-input-placeholder {\r\n      color: $searchbox-color;\r\n    }\r\n    &__content:-moz-placeholder {\r\n      color: $searchbox-color;\r\n    }\r\n    &__content::-moz-placeholder {\r\n      color: $searchbox-color;\r\n    }\r\n    &__content:-ms-input-placeholder {\r\n      color: $searchbox-color;\r\n    }\r\n  }\r\n  &__register-button {\r\n    background: #e30b0b;\r\n    box-shadow: 0 4px 8px 0 rgba(255, 0, 0, 0.32);\r\n    border-radius: 4px;\r\n    color: #fff;\r\n    font-size: 0.32rem;\r\n    height: 0.96rem;\r\n    margin: 0.64rem 0.8rem 0.1rem;\r\n    line-height: 0.96rem;\r\n    text-align: center;\r\n  }\r\n  &__register-link {\r\n    font-size: 0.28rem;\r\n    height: 0.96rem;\r\n    margin: 0 0.8rem 0;\r\n    line-height: 0.96rem;\r\n    text-align: center;\r\n    color: $content-notice-fontColor;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Register.vue?vue&type=template&id=efc09f98&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=efc09f98&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-efc09f98\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=efc09f98&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=a8bd786c&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/user.55d798b6.png\";","<template>  \r\n  <div class=\"toast\">\r\n  <span v-if='showIcon' :class=\"iconstate\">\r\n  </span>\r\n  <span class=\"toast-text\"> {{ message }}</span>\r\n      </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from \"vue\";\r\n\r\nconst useToastEffect = () => {\r\n  const toastData = reactive({\r\n    show: false,\r\n    toastMessage: \"\",\r\n    icon:{\r\n        success:'iconfont icon-chenggong2',\r\n        defeat:'iconfont icon-shibai1'\r\n    },\r\n    iconstate:'',\r\n    showIcon:false\r\n  });\r\n  const showToast = (message,state='') => {\r\n      \r\n    if(!state){toastData.showIcon=false};\r\n    if(toastData.icon[state]!==undefined){\r\n        toastData.showIcon=true;\r\n        toastData.iconstate=toastData.icon[state];\r\n    }\r\n    toastData.show = true;\r\n    toastData.toastMessage = message;\r\n    setTimeout(() => {\r\n    toastData.show = false;\r\n    toastData.showIcon=false;\r\n    toastData.toastMessage = \"\";\r\n    }, 1800);\r\n  };\r\n  const { show, toastMessage,iconstate,showIcon} = toRefs(toastData);\r\n  return { show, toastMessage, showToast,iconstate,showIcon};\r\n};\r\nexport default {\r\n  name: \"Toast\",\r\n  props:['message','iconstate','showIcon'],\r\n};\r\nexport {useToastEffect}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.toast {\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  padding: 0.2rem .4rem .3rem;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  border-radius: 0.1rem;\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  align-items: center;\r\n  color:#fff;\r\n  z-index: 100;\r\n  span{\r\n      padding:.04rem 0rem;\r\n  }\r\n  .iconfont{\r\n    font-size: 0.64rem;\r\n  }\r\n\r\n}\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=a8bd786c&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=a8bd786c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a8bd786c\"\n\nexport default script"],"sourceRoot":""}